@using Csharp3_A3.Models;
@model List<NewsItem>
@{
	ViewData["Title"] = "Manage News";
}

<table class="table">
	<thead>
		<tr>
			<th>Title</th>
			<th>Content</th>
			<th>Image Path</th>
			<th>Edit/Delete</th>
		</tr>
	</thead>
	<tbody>
		@foreach (var item in Model)
		{
			<tr>
				<td>@item.Title</td>
				<td>@item.Content</td>
				<td>@item.ImagePath</td>
				<td>
					<a asp-page="/Admin/EditNews" asp-route-id="@item.Id" class="btn btn-sm btn-outline-primary mb-2">Edit</a>
					
					<!-- Modal trigger -->
					<button type="button" class="btn btn-sm btn-outline-danger" data-bs-toggle="modal" data-bs-target="#deleteModal-@item.Id" data-id="@item.Id">Delete</button>
					
					<!-- Modal for each delete btn -->
					<div class="modal fade" id="deleteModal-@item.Id" tabindex="-1">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header"> <!-- Header + graphic cancel btn -->
									<h5>Do you want to delete this news item?</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
								</div>
								<div class="modal-body"> <!-- Body/delete prompt -->
									Are you sure you want to delete <strong>@item.Title</strong>
								</div>
								<div class="modal-footer"> <!-- Cancel + delete btn -->
									<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
									<form method="post" asp-page-handler="Delete" asp-route-id="@item.Id">
										<button type="submit" class="btn btn-danger">Delete</button>
									</form>
								</div>
							</div>
						</div>
					</div>
				</td>
			</tr>
		}
	</tbody>
</table>

<a asp-page="/Admin/AddNews" class="btn btn-outline-primary mt-2">Add News Item</a>
