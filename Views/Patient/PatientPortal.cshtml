@model Csharp3_A3.ViewModels.PatientPortalViewModel
@{
	Layout = "_MinimalLayout";
	ViewData["Title"] = "Patient Portal";
}

<div class="container mt-3">
	<div class="row">

		<!-- Sidebar menu -->
		<div class="col-md-4">
			<div class="d-flex flex-column gap-2 p-2 bg-info bg-opacity-50 rounded news-section">
				<a asp-controller="Patient" asp-action="PatientPortal" asp-route-section="Profile" class="btn btn-primary bg-black bg-opacity-50">Profile</a> <!-- If navigation successful: section = "Profile" -->
				<a asp-controller="Patient" asp-action="PatientPortal" asp-route-section="Appointments" class="btn btn-primary bg-black bg-opacity-50">Appointments</a>
				<a asp-controller="Patient" asp-action="PatientPortal" asp-route-section="Medical Records" class="btn btn-primary bg-black bg-opacity-50">Medical Records</a>
				<a asp-controller="Patient" asp-action="PatientPortal" asp-route-section="Prescriptions" class="btn btn-primary bg-black bg-opacity-50">Prescriptions</a>
			</div>
		</div>

		<!-- Generated content based on menu-choice -->
		<div class="col ms-2">
			@if (Model.ActiveSection == "Profile")
			{
				<h2>Profile</h2>
				<table class="table">
					<thead>
						<tr>
							<th>Name</th>
							<th>Date of Birth</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>@Model.CurrentPatient.Name</td>
							<td>@Model.CurrentPatient.DateOfBirth</td>
						</tr>
					</tbody>
				</table>
			}
			else if (Model.ActiveSection == "Appointments")
			{
				<h2>Appointments</h2>
				<table class="table">
					<thead>
						<tr>
							<th>Date</th>
							<th>Doctor</th>
						</tr>
					</thead>
					<tbody>
						@foreach (var appointment in Model.Appointments)
						{
							<tr>
								<td>@appointment.DateOfAppointment</td>
								<td>@appointment.Staff.Name</td>
							</tr>
						}	
					</tbody>
				</table>

				<!-- Schedule Appointment button -->
				<a asp-controller="Appointments" asp-action="Index" class="btn btn-outline-primary">Manage appointments</a>
			}
			else if (Model.ActiveSection == "Medical Records")
			{
				<h2>Medical Records</h2>
				<table class="table">
					<thead>
						<tr>
							<th>Date of visit</th>
							<th>Reason</th>
							<th>Notes</th>
							<th>Prescriptions</th>
						</tr>
					</thead>
					<tbody>
						@foreach (var history in Model.MedicalHistory)
						{
							<tr>
								<td>@history.DateOfVisit</td>
								<td>@history.Reason</td>
								<td>@history.Notes</td>
								<td>@history.Prescriptions</td>
							</tr>
						}
					</tbody>
				</table>
			}
			else if (Model.ActiveSection == "Prescriptions")
			{
				<h2>Prescriptions</h2>
				<table class="table">
					<thead>
						<tr>
							<th>Date of visit</th>
							<th>Reason</th>
							<th>Prescriptions</th>
						</tr>
					</thead>
					<tbody>
						@foreach (var history in Model.MedicalHistory)
						{
							<tr>
								<td>@history.DateOfVisit</td>
								<td>@history.Reason</td>
								<td>@history.Prescriptions</td>
							</tr>
						}
					</tbody>
				</table>
			}
		</div>
	</div>
</div>